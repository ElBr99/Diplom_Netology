2023-12-19 21:32:14,331 INFO [main] org.springframework.test.context.support.AbstractContextLoader: Could not detect default resource locations for test class [netology.diplom.filestorage.service.FileServiceTest]: no resource found for suffixes {-context.xml, Context.groovy}.
2023-12-19 21:32:14,337 INFO [main] org.springframework.test.context.support.AnnotationConfigContextLoaderUtils: Could not detect default configuration classes for test class [netology.diplom.filestorage.service.FileServiceTest]: FileServiceTest does not declare any static, non-private, non-final, nested classes annotated with @Configuration.
2023-12-19 21:32:14,495 INFO [main] org.springframework.boot.test.context.SpringBootTestContextBootstrapper: Found @SpringBootConfiguration netology.diplom.filestorage.Application for test class netology.diplom.filestorage.service.FileServiceTest
2023-12-19 21:32:14,604 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Loaded default TestExecutionListener class names from location [META-INF/spring.factories]: [org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener, org.springframework.test.context.web.ServletTestExecutionListener, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener, org.springframework.test.context.event.ApplicationEventsTestExecutionListener, org.springframework.test.context.support.DependencyInjectionTestExecutionListener, org.springframework.test.context.support.DirtiesContextTestExecutionListener, org.springframework.test.context.transaction.TransactionalTestExecutionListener, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener, org.springframework.test.context.event.EventPublishingTestExecutionListener, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener, org.springframework.security.test.context.support.ReactorContextTestExecutionListener]
2023-12-19 21:32:14,617 INFO [main] org.springframework.test.context.support.AbstractTestContextBootstrapper: Using TestExecutionListeners: [org.springframework.test.context.web.ServletTestExecutionListener@3e10dc6, org.springframework.test.context.support.DirtiesContextBeforeModesTestExecutionListener@7e22550a, org.springframework.test.context.event.ApplicationEventsTestExecutionListener@45e37a7e, org.springframework.boot.test.mock.mockito.MockitoTestExecutionListener@62452cc9, org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener@6941827a, org.springframework.test.context.support.DirtiesContextTestExecutionListener@5a7005d, org.springframework.test.context.transaction.TransactionalTestExecutionListener@5bc9ba1d, org.springframework.test.context.jdbc.SqlScriptsTestExecutionListener@1021f6c9, org.springframework.test.context.event.EventPublishingTestExecutionListener@7516e4e5, org.springframework.security.test.context.support.WithSecurityContextTestExecutionListener@488eb7f2, org.springframework.security.test.context.support.ReactorContextTestExecutionListener@5e81e5ac, org.springframework.boot.test.mock.mockito.ResetMocksTestExecutionListener@4189d70b, org.springframework.boot.test.autoconfigure.restdocs.RestDocsTestExecutionListener@3fa2213, org.springframework.boot.test.autoconfigure.web.client.MockRestServiceServerResetTestExecutionListener@3e7634b9, org.springframework.boot.test.autoconfigure.web.servlet.MockMvcPrintOnlyOnFailureTestExecutionListener@6f0b0a5e, org.springframework.boot.test.autoconfigure.web.servlet.WebDriverTestExecutionListener@6035b93b, org.springframework.boot.test.autoconfigure.webservices.client.MockWebServiceServerTestExecutionListener@320de594]
2023-12-19 21:32:14,732 INFO [main] org.testcontainers.utility.ImageNameSubstitutor: Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')
2023-12-19 21:32:14,751 INFO [main] org.testcontainers.dockerclient.DockerClientProviderStrategy: Loaded org.testcontainers.dockerclient.NpipeSocketClientProviderStrategy from ~/.testcontainers.properties, will try it first
2023-12-19 21:32:15,228 INFO [main] org.testcontainers.dockerclient.DockerClientProviderStrategy: Found Docker environment with local Npipe socket (npipe:////./pipe/docker_engine)
2023-12-19 21:32:15,230 INFO [main] org.testcontainers.DockerClientFactory: Docker host IP address is localhost
2023-12-19 21:32:15,258 INFO [main] org.testcontainers.DockerClientFactory: Connected to docker: 
  Server Version: 24.0.2
  API Version: 1.43
  Operating System: Docker Desktop
  Total Memory: 7809 MB
2023-12-19 21:32:15,287 INFO [main] org.testcontainers.containers.GenericContainer: Creating container for image: testcontainers/ryuk:0.3.4
2023-12-19 21:32:15,509 INFO [main] org.testcontainers.utility.RegistryAuthLocator: Credential helper/store (docker-credential-desktop) does not have credentials for https://index.docker.io/v1/
2023-12-19 21:32:15,650 INFO [main] org.testcontainers.containers.GenericContainer: Container testcontainers/ryuk:0.3.4 is starting: 392e524dbe4eb114b803698ddb938180c70a649be57a6b09ef02182ce355a04c
2023-12-19 21:32:16,149 INFO [main] org.testcontainers.containers.GenericContainer: Container testcontainers/ryuk:0.3.4 started in PT0.8810443S
2023-12-19 21:32:16,156 INFO [main] org.testcontainers.utility.RyukResourceReaper: Ryuk started - will monitor and terminate Testcontainers containers on JVM exit
2023-12-19 21:32:16,157 INFO [main] org.testcontainers.DockerClientFactory: Checking the system...
2023-12-19 21:32:16,158 INFO [main] org.testcontainers.DockerClientFactory: ✔︎ Docker server version should be at least 1.6.0
2023-12-19 21:32:16,171 INFO [main] org.testcontainers.containers.GenericContainer: Creating container for image: postgres:latest
2023-12-19 21:32:16,172 WARN [main] org.testcontainers.containers.GenericContainer: Reuse was requested but the environment does not support the reuse of containers
To enable reuse of containers, you must set 'testcontainers.reuse.enable=true' in a file located at C:\Users\sddfs\.testcontainers.properties
2023-12-19 21:32:16,215 INFO [main] org.testcontainers.containers.GenericContainer: Container postgres:latest is starting: d383adae66a3c531f0b20d218352dfd280556005438b58329330dcd7ad56b6fe
2023-12-19 21:32:17,799 INFO [main] org.testcontainers.containers.GenericContainer: Container postgres:latest started in PT1.6412807S
2023-12-19 21:32:18,081 INFO [background-preinit] org.hibernate.validator.internal.util.Version: HV000001: Hibernate Validator 6.2.5.Final
2023-12-19 21:32:18,090 INFO [main] org.springframework.boot.StartupInfoLogger: Starting FileServiceTest using Java 17.0.9 on Ilya with PID 9904 (started by sddfs in C:\Users\sddfs\Desktop\DiplomaWork_cloud_storage-main)
2023-12-19 21:32:18,091 INFO [main] org.springframework.boot.SpringApplication: No active profile set, falling back to 1 default profile: "default"
2023-12-19 21:32:19,430 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Multiple Spring Data modules found, entering strict repository configuration mode
2023-12-19 21:32:19,432 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Bootstrapping Spring Data JDBC repositories in DEFAULT mode.
2023-12-19 21:32:19,486 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport: Spring Data JDBC - Could not safely identify store assignment for repository candidate interface netology.diplom.filestorage.repository.FileRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2023-12-19 21:32:19,489 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport: Spring Data JDBC - Could not safely identify store assignment for repository candidate interface netology.diplom.filestorage.repository.UserRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2023-12-19 21:32:19,491 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationExtensionSupport: Spring Data JDBC - Could not safely identify store assignment for repository candidate interface netology.diplom.filestorage.repository.UserRoleRepository; If you want this repository to be a JDBC repository, consider annotating your entities with one of these annotations: org.springframework.data.relational.core.mapping.Table.
2023-12-19 21:32:19,493 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 51 ms. Found 0 JDBC repository interfaces.
2023-12-19 21:32:19,504 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Multiple Spring Data modules found, entering strict repository configuration mode
2023-12-19 21:32:19,506 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Bootstrapping Spring Data JPA repositories in DEFAULT mode.
2023-12-19 21:32:19,566 INFO [main] org.springframework.data.repository.config.RepositoryConfigurationDelegate: Finished Spring Data repository scanning in 53 ms. Found 3 JPA repository interfaces.
2023-12-19 21:32:20,644 INFO [main] org.springframework.boot.web.embedded.tomcat.TomcatWebServer: Tomcat initialized with port(s): 0 (http)
2023-12-19 21:32:20,661 INFO [main] org.apache.juli.logging.DirectJDKLog: Initializing ProtocolHandler ["http-nio-auto-1"]
2023-12-19 21:32:20,662 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting service [Tomcat]
2023-12-19 21:32:20,663 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting Servlet engine: [Apache Tomcat/9.0.68]
2023-12-19 21:32:20,860 INFO [main] org.apache.juli.logging.DirectJDKLog: Initializing Spring embedded WebApplicationContext
2023-12-19 21:32:20,861 INFO [main] org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext: Root WebApplicationContext: initialization completed in 2751 ms
2023-12-19 21:32:21,062 WARN [main] org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration$JpaWebConfiguration: spring.jpa.open-in-view is enabled by default. Therefore, database queries may be performed during view rendering. Explicitly configure spring.jpa.open-in-view to disable this warning
2023-12-19 21:32:21,331 INFO [main] org.hibernate.jpa.internal.util.LogHelper: HHH000204: Processing PersistenceUnitInfo [name: default]
2023-12-19 21:32:21,404 INFO [main] org.hibernate.Version: HHH000412: Hibernate ORM core version 5.6.12.Final
2023-12-19 21:32:21,685 INFO [main] org.hibernate.annotations.common.reflection.java.JavaReflectionManager: HCANN000001: Hibernate Commons Annotations {5.1.2.Final}
2023-12-19 21:32:21,859 INFO [main] com.zaxxer.hikari.HikariDataSource: HikariPool-1 - Starting...
2023-12-19 21:32:22,099 INFO [main] com.zaxxer.hikari.HikariDataSource: HikariPool-1 - Start completed.
2023-12-19 21:32:22,123 INFO [main] org.hibernate.dialect.Dialect: HHH000400: Using dialect: org.hibernate.dialect.PostgreSQL95Dialect
2023-12-19 21:32:23,323 WARN [main] org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler: SQL Warning Code: 0, SQLState: 00000
2023-12-19 21:32:23,325 WARN [main] org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler: relation "user_roles" does not exist, skipping
2023-12-19 21:32:23,328 WARN [main] org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler: SQL Warning Code: 0, SQLState: 00000
2023-12-19 21:32:23,329 WARN [main] org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler: relation "user_roles" does not exist, skipping
2023-12-19 21:32:23,332 WARN [main] org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler: SQL Warning Code: 0, SQLState: 00000
2023-12-19 21:32:23,333 WARN [main] org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler: table "file" does not exist, skipping
2023-12-19 21:32:23,336 WARN [main] org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler: SQL Warning Code: 0, SQLState: 00000
2023-12-19 21:32:23,336 WARN [main] org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler: table "user" does not exist, skipping
2023-12-19 21:32:23,338 WARN [main] org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler: SQL Warning Code: 0, SQLState: 00000
2023-12-19 21:32:23,339 WARN [main] org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler: table "user_roles" does not exist, skipping
2023-12-19 21:32:23,341 WARN [main] org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler: SQL Warning Code: 0, SQLState: 00000
2023-12-19 21:32:23,341 WARN [main] org.hibernate.engine.jdbc.spi.SqlExceptionHelper$StandardWarningHandler: table "user_role" does not exist, skipping
2023-12-19 21:32:23,369 INFO [main] org.hibernate.engine.transaction.jta.platform.internal.JtaPlatformInitiator: HHH000490: Using JtaPlatform implementation: [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform]
2023-12-19 21:32:23,381 INFO [main] org.springframework.orm.jpa.AbstractEntityManagerFactoryBean: Initialized JPA EntityManagerFactory for persistence unit 'default'
2023-12-19 21:32:24,980 INFO [main] org.springframework.security.web.DefaultSecurityFilterChain: Will secure any request with [org.springframework.security.web.session.DisableEncodeUrlFilter@2d2afbdf, org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter@6cb2d5ea, org.springframework.security.web.context.SecurityContextPersistenceFilter@19c578bf, org.springframework.security.web.header.HeaderWriterFilter@6ebf5f26, org.springframework.web.filter.CorsFilter@3ed1446c, org.springframework.security.web.authentication.logout.LogoutFilter@64c1a76e, netology.diplom.filestorage.security.AuthTokenFilter@52a3eba3, org.springframework.security.web.savedrequest.RequestCacheAwareFilter@5e1535e0, org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter@776b7fa2, org.springframework.security.web.authentication.AnonymousAuthenticationFilter@2e9bff08, org.springframework.security.web.session.SessionManagementFilter@6015c745, org.springframework.security.web.access.ExceptionTranslationFilter@32a29361, org.springframework.security.web.access.intercept.FilterSecurityInterceptor@690113f0]
2023-12-19 21:32:25,584 INFO [main] org.apache.juli.logging.DirectJDKLog: Starting ProtocolHandler ["http-nio-auto-1"]
2023-12-19 21:32:25,614 INFO [main] org.springframework.boot.web.embedded.tomcat.TomcatWebServer: Tomcat started on port(s): 21067 (http) with context path ''
2023-12-19 21:32:25,625 INFO [main] org.springframework.boot.StartupInfoLogger: Started FileServiceTest in 7.822 seconds (JVM running for 12.316)
2023-12-19 21:32:26,387 INFO [main] netology.diplom.filestorage.service.FileService: Контрольная сумма успешно сгенерирована для файла: cd08388399e4dd736d17613275fa8b77b2d665d51689f1d642e36c0fd278bc5a
2023-12-19 21:32:26,389 INFO [main] netology.diplom.filestorage.service.FileService: Получен массив байтов файла и сгенерирован хэш файла:cd08388399e4dd736d17613275fa8b77b2d665d51689f1d642e36c0fd278bc5a
2023-12-19 21:32:26,389 INFO [main] netology.diplom.filestorage.service.FileService: Проверка наличия файла в базе данных хэшу:cd08388399e4dd736d17613275fa8b77b2d665d51689f1d642e36c0fd278bc5a
2023-12-19 21:32:26,489 INFO [SpringApplicationShutdownHook] org.springframework.orm.jpa.AbstractEntityManagerFactoryBean: Closing JPA EntityManagerFactory for persistence unit 'default'
2023-12-19 21:32:26,490 INFO [SpringApplicationShutdownHook] org.hibernate.tool.schema.internal.SchemaDropperImpl$DelayedDropActionImpl: HHH000477: Starting delayed evictData of schema as part of SessionFactory shut-down'
2023-12-19 21:32:26,511 INFO [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource: HikariPool-1 - Shutdown initiated...
2023-12-19 21:32:26,519 INFO [SpringApplicationShutdownHook] com.zaxxer.hikari.HikariDataSource: HikariPool-1 - Shutdown completed.
